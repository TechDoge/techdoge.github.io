layout:     post
title:      Spring 
subtitle:   
date:       2019-06-23
author:     ctrlcoder
header-img: 
catalog: true
tags:

    - Spring
typora-root-url: ..

## Spring

Spring 是分层的 Java SE/EE 应用 full-stack 轻量级开源框架，以 IoC（Inverse Of Control：反转控制）和 AOP（Aspect Oriented Programming：面向切面编程）为内核，提供了展现层 Spring MVC 和持久层 Spring JDBC 以及业务层事务管理等众多的企业级应用技术，还能整合开源世界众多著名的第三方框架和类库，逐渐成为使用最多的 Java EE 企业应用开源框架。

![1562135078996](/img/assets_2019/1562135078996.png)



### IoC（控制反转）

### DI（依赖注入）

## 核心容器（管理Bean的工厂）

### BeanFactory接口

BeanFactory 才是 Spring 容器中的顶层接口，ApplicationContext 是它的子接口。 

**BeanFactory 和 ApplicationContext 的区别：** 

- 创建对象的时间点不一样。 

- ApplicationContext：只要一读取配置文件，默认情况下就会创建对象。 

- BeanFactory：什么使用什么时候创建对象。 

### ApplicationContext接口

- ClassPathXmlApplicationContext 它是从类的根路径下加载配置文件 推荐使用这种

- FileSystemXmlApplicationContext 它是从磁盘路径上加载配置文件，配置文件可以在磁盘的任意位置。

- AnnotationConfigApplicationContext 当我们使用注解配置容器对象时，需要使用此类来创建 spring 容器。它用来读取注解。

  

### 入门程序

1. 创建接口和实现类

2. 配置文件
     		

     ```xml
     	<bean id="userDao" class="com.zen.dao.impl.UserDaoImpl"></bean>
     ```

     

3. 测试程序
     			

     ```java
     ApplicationContext ac = new  		ClassPathXmlApplicationContext("applicationContext.xml");
     UserDao userDao = (UserDao) ac.getBean("userDao")
     ```

     


## Bean

### 常用标签

id：给对象在容器中提供一个唯一标识。用于获取对象。 

class：指定类的全限定类名。用于反射创建对象。默认情况下调用无参构造函数。 

scope：指定对象的作用范围。 

- singleton :默认值，单例的. 

- prototype :多例的. 

-  request :WEB 项目中,Spring 创建一个 Bean 的对象,将对象存入到 request 域中. 

- session :WEB 项目中,Spring 创建一个 Bean 的对象,将对象存入到 session 域中. 

-  global session :WEB 项目中,应用在 Portlet 环境.如果没有 Portlet 环境那么 globalSession 相当于 session. 

init-method：指定类中的初始化方法名称。 

destroy-method：指定类中销毁方法名称。 

![1562136501698](../img/assets_2019/1562136501698.png)

### **实例化** **Bean** **的三种方式** 

#### ☆使用默认无参构造函数

#### 静态工厂方法

​	使用 StaticFactory 类中的静态方法 createAccountService 创建对象，并存入 spring 容器

#### 实例工厂方法

​	先把工厂的创建交给 spring 来管理，然后在使用工厂的 bean 来调用里面的方法

### Bean装配（依赖注入）

#### 	基于XML的装配

##### 		构造函数注入

​			涉及的标签：constructor-arg
​			类中需要提供一个对应参数列表的构造函数

##### 		属性setter()方法注入

​			类中提供默认无参构造函数和setter方法
​			涉及的标签：property
​			注入集合类型
​				List 结构的：list,set,array
​				Map 结构的：map,entry|props,prop

#### 基于注解的装配

##### 		常用注解

###### 			用于创建对象的

​				相当于：<bean id="" class="">
​				**@Component**
​					把资源让 spring 来管理。相当于在 xml 中配置一个 bean
​					@Controller @Service @Repository
​				如果不指定 value 属性，默认 bean 的 id 是当前类的类名，首字母小写

###### 			用于注入数据的

​				相当于：<property name="" ref=""> |<property name="" value="">
​				**@Autowired **自动按照类型注入
​				**@Qualifier**
​					在自动按照类型注入的基础之上，再按照 Bean 的 id 注入
​					必须和@Autowire 一起使用；但是给方法参数注入时，可以独立使用
​				**@Resource**
​					直接按照 Bean 的 id 注入
​				**@Value**
​					注入基本数据类型和 String 类型数据的

###### 			用于改变作用范围的

​				相当于：<bean id="" class="" scope="">
​				**@Scope**
​					指定 bean 的作用范围。

##### 注解配置

​			applicationContext.xml

```xml
<!-- 告知 spring 创建容器时要扫描的包 -->
<context:component-scan base-package="com.zen"></context:component-scan>
```

​				告知spring框架在，读取配置文件，创建容器时，扫描注解，依据注解创建对象，并存入容器中

​				告知spring框架在，读取配置文件，创建容器时，扫描注解，依据注解创建对象，并存入容器中

##### 纯注解方法

